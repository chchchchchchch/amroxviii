<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0;" />
  <link rel="stylesheet" media="screen" href="./Beispiel:SELFHTML-Beispiel-Grundlayout.css" />
  <title>Animation mit canvas</title>
  <style>
    canvas {background:white; border:1px solid #333;}  
  </style>
  <script>
'use strict';

(function () {
   var x =  0;
   var y = 15;
   var speed = 3;

  function animate() {

    requestAnimationFrame(animate);

    x += speed;

    if(x <= 0 || x >= 475){
        speed = -speed;
	// y = y + 10; so könnte das Objekt am Ende einer Zeile eine Zeile nach unten gehen
    }

    draw();
  }


  function draw() {
    var canvas  = document.getElementById('canvas');
    var context = canvas.getContext('2d');

var loopDuration = 1;
var LINES = 50;

  context.fillStyle = '#fff';
  context.lineWidth = 1;
  context.fillRect(0,0,canvas.width, canvas.height);
  var time = ( .001 * performance.now() ) % loopDuration;
  for (var j = 0; j < LINES; j++) {
    var y = j * canvas.height / LINES;
    context.beginPath();
    context.moveTo(-10,y);
    for(var x=-10; x<canvas.width+20;x++) {
      var dx = .5 * canvas.width - x;
      var dy = .5 * canvas.height - y;
      var d = Math.sqrt(dx*dx+dy*dy);
      var offset = 50. * Math.sin( .00005 * d * d - time * 2 * Math.PI / loopDuration ) * Math.exp( - .00001 * d * d );
      context.lineTo(x,y+offset);
    }
    context.lineTo(canvas.width+20,y+2*canvas.height);
    context.lineTo(-10,y+2*canvas.height);
    context.closePath();
    context.fill();
    context.stroke();
  }


  }
			
  document.addEventListener(
	"DOMContentLoaded",
	function () { animate(); }
  );

}());  
 
  </script>
</head>
  <body>
  <h1>Animation mit canvas</h1>
 
  <main>
    <canvas id="canvas" width="500" height="300">Beispiel für eine Animation mit Canvas.</canvas>
  </main>
  
</body>
</html>
